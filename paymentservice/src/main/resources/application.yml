server:
  port: 9993
spring:
  jpa:
    hibernate:
      ddl-auto: update

    debug: true
    show-sql: true
  datasource:
    url: jdbc:mysql://localhost:3306/Paymentservice
    username: root
    password: sumit
    driver-class-name: com.mysql.cj.jdbc.Driver
  application:
    name: PAYMENT-SERVICE
config: 
    import: optional:configserver:http://localhost:9997

resilience4j:
      circuitbreaker:
        instances:
          userPaymentsService:
            registerHealthIndicator: true
            slidingWindowSize: 10
            failureRateThreshold: 50
            waitDurationInOpenState: 10s
            permittedNumberOfCallsInHalfOpenState: 3
            minimumNumberOfCalls: 5
            automaticTransitionFromOpenToHalfOpenEnabled: true
          bookingService:
            registerHealthIndicator: true
            slidingWindowSize: 10
            failureRateThreshold: 50
            waitDurationInOpenState: 10s
            permittedNumberOfCallsInHalfOpenState: 3
            minimumNumberOfCalls: 5
            automaticTransitionFromOpenToHalfOpenEnabled: true

retry:
        instances:
          bookingService:
              maxRetryAttempts: 3
              waitDuration: 2s
          userPaymentsService:
            maxRetryAttempts: 3
            waitDuration: 2s

#Actuator properties for health 
management:
   health:
     circuitbreakers:
       enabled: true
   endpoints:
     web:
       exposure:
         include: '*'
   endpoint:
     health:
       show-details: always

# Optional logging (to see when fallback/circuit breaker triggers)
#logging:
#  level:
#   io.github.resilience4j: DEBUG


#eureka:
#  client:
#    fetch-registry: true
#instance:
#    prefer-ip-address: true
#    register-with-eureka: true
#    service-url:
#      defaultzone:  http://localhost:8761/eureka